{{ define "main" }}
<div class="search-container">
  <input type="text" id="search-input" placeholder="Buscar píldoras...">
</div>

<div class="pildoras">
  {{ range .Pages }}
    <div class="pildora" data-title="{{ .Title | lower }}" data-description="{{ .Description | lower }}">
      {{ with .Params.image }}
        <img src="/images/{{ . }}" alt="{{ $.Title }}">
      {{ end }}
      <h2>{{ .Title }}</h2>
      <p>{{ .Description }}</p>
      {{ with .Params.url }}
        <a href="{{ . }}" target="_blank" class="button">Más información</a>
      {{ end }}
      <p class="date">{{ .Date.Format "02-01-2006" }}</p>
    </div>
  {{ end }}
</div>

<script>
document.getElementById('search-input').addEventListener('input', function() {
  const searchTerm = this.value.toLowerCase();
  const pildoras = document.querySelectorAll('.pildora');
  
  pildoras.forEach(pildora => {
    const title = pildora.dataset.title;
    const description = pildora.dataset.description;
    
    if (title.includes(searchTerm) || description.includes(searchTerm)) {
      pildora.style.display = '';
    } else {
      pildora.style.display = 'none';
    }
  });
});
</script>
{{ end }}
